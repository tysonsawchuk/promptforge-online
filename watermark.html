<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Image → Text (Auto‑Describe) + Prompt Builder | PromptForge</title>
  <meta name="description" content="Drop an image, get an automatic description (caption) that runs fully in your browser—no server. Then turn it into a production‑ready prompt for Midjourney or Stable Diffusion. Free, fast, private." />
  <link rel="canonical" href="https://promptforge.online/imagetodescribe.html" />
  <meta property="og:title" content="Image → Text (Auto‑Describe) + Prompt Builder" />
  <meta property="og:description" content="100% client‑side image captioning with Transformers.js + prompt templates for MJ & SD." />
  <meta property="og:image" content="/assets/og/imagetoprompt.png" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Image → Text (Auto‑Describe) + Prompt Builder" />
  <meta name="twitter:description" content="Serverless image captioning + prompt builder. Paid‑quality, free." />
  <link rel="icon" href="/assets/favicon.png" type="image/png" />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800;900&family=Fira+Mono:wght@400;700&display=swap" rel="stylesheet">

  <!-- JuicyAds Loader -->
  <script type="text/javascript" data-cfasync="false" async src="https://poweredby.jads.co/js/jads.js"></script>

  <style>
    :root{ --brand:#64f2e3; --brand2:#be9cff; --accent:#ffd166; --bg:#0b0f14; --panel:#10161d; --card:#141b21; --ink:#d6f5ff; --dim:#9db1bd; --edge:#232a33; --good:#4df6a0; }
    html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);font-family:'Inter',system-ui,Segoe UI,Roboto,'Fira Mono',monospace;}
    a{color:var(--brand)}
    #matrixRain{position:fixed;inset:0;z-index:0;pointer-events:none}
    .wrap{position:relative;z-index:1}

    .newsbar{width:100%;min-height:44px;display:flex;align-items:center;justify-content:center;background:linear-gradient(90deg,transparent,#111827,transparent);border-bottom:1px solid var(--brand2);box-shadow:0 2px 10px #0006}
    .newsbar .version{margin-right:1rem;background:var(--brand2);color:#141b21;border-radius:8px;padding:.18em .7em;font-weight:900}

    .nav{background:#0f141a;display:flex;align-items:center;justify-content:space-between;padding:.9em 1rem 1.1em;border-bottom:1px solid #1c2630}
    .logo{font-family:'Fira Mono',monospace;font-weight:900;font-size:2rem;background:linear-gradient(90deg,var(--brand),var(--brand2));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
    .breadcrumb{display:flex;gap:1rem}
    .breadcrumb a{color:var(--brand);text-decoration:none;font-weight:600}
    .breadcrumb a.active{color:var(--accent);border-bottom:2px solid var(--accent)}

    .ad-wrap{display:flex;align-items:center;justify-content:center;margin:12px auto}
    .ad-728x90{width:728px;min-height:90px}
    .ad-300x250{width:300px;min-height:250px}
    .ad-160x600{width:160px;min-height:600px}

    .hero{max-width:980px;margin:1.2rem auto 0;text-align:center}
    .hero b{color:var(--brand2)}
    .panel{max-width:1400px;margin:1.2rem auto 3.4rem;background:var(--panel);border:1px solid #1e2731;border-radius:18px;box-shadow:0 6px 28px #0008;padding:1.5rem}
    .grid{display:grid;grid-template-columns:1.2fr .95fr;gap:1.2rem}
    @media (max-width:1100px){.grid{grid-template-columns:1fr}}

    .step{background:var(--card);border:1px solid #21313c;border-radius:14px;padding:1rem;margin-bottom:1rem}
    .step h3{margin:.2rem 0 .4rem;font-weight:900;color:var(--brand2)}
    .micro{color:var(--accent);font-weight:800;cursor:pointer;margin-left:.45em}

    .uploader{border:2px dashed var(--brand2);border-radius:12px;background:#0f141a;padding:1.1rem;display:flex;flex-direction:column;align-items:center;gap:.5rem}
    .btn{border-radius:10px;border:1.5px solid var(--brand2);background:#1b1f2a;color:var(--brand2);padding:.6em 1.1em;font-weight:800;cursor:pointer}
    .btn.primary{background:var(--brand2);color:#141b21;border:none}
    .btn.good{background:var(--good);color:#141b21;border:none}
    .row{display:flex;flex-wrap:wrap;gap:.7rem;align-items:center}

    .canvas-wrap{background:#0d1117;border:1px solid #22303a;border-radius:14px;padding:.7rem;display:flex;flex-direction:column;align-items:center}
    canvas#preview{max-width:100%;border-radius:10px}

    .two{display:grid;grid-template-columns:1fr 1fr;gap:.8rem}
    @media (max-width:800px){.two{grid-template-columns:1fr}}
    .field{background:#111720;border:1px solid #21313c;border-radius:12px;padding:.75rem}
    input[type="text"],select,textarea{width:100%;padding:.7rem .9rem;border-radius:8px;border:1px solid #273845;background:#0f141a;color:#cfefff}
    textarea{min-height:110px}

    .chips{display:flex;flex-wrap:wrap;gap:.5rem}
    .chip{background:#1a2129;color:#b9e9ff;border:1px solid #233140;border-radius:999px;padding:.35em .75em;font-size:.95em;cursor:pointer}
    .chip.active{background:#24384a;color:#fff;border-color:var(--brand)}

    .out{background:#0f1420;border:1px solid #21313c;border-radius:12px;padding:1rem;min-height:88px}
    .kbd{font-family:"Fira Mono",monospace;background:#0e1520;border:1px solid #2b3d49;border-radius:6px;padding:.12em .45em}

    .sticky{position:sticky;top:84px}

    .j1nx-float-true{position:fixed;right:22px;bottom:22px;z-index:3000;display:flex;flex-direction:column;align-items:center;max-width:340px}
    .j1nx-true-cutout-img{width:260px;height:260px;object-fit:contain;border-radius:24px;margin-bottom:-22px}
    .j1nx-bubble-true-main{background:rgba(22,23,31,.97);border:2px solid var(--brand);border-radius:17px;padding:1em 1.2em;min-width:290px;max-width:330px}
    @media (max-width:980px){.j1nx-true-cutout-img{width:140px;height:140px}}
    @media (max-width:760px){.j1nx-bubble-true-main{display:none}}

    #sideAd{position:fixed;left:14px;top:120px;z-index:2;display:none}
    @media (min-width:1320px){#sideAd{display:flex}}

    footer{margin-top:3rem}
  </style>

  <!-- EXIF + Color libs (optional extras) -->
  <script src="https://unpkg.com/exifr/dist/full.umd.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/color-thief/2.4.0/color-thief.umd.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>
<body>
  <canvas id="matrixRain"></canvas>
  <div class="wrap">
    <div class="newsbar"><span class="version">v3.1</span><span style="opacity:.95">Serverless image description is now built‑in.</span></div>
    <nav class="nav">
      <div class="nav-l">
        <span class="logo">PromptForge</span>
        <span class="breadcrumb">
          <a href="/main.html">Main</a>
          <a href="/picture.html">Image</a>
          <a href="/movie.html">Movie</a>
          <a href="/watermark.html">Watermark</a>
          <a class="active" href="/imagetodescribe.html">Image→Describe</a>
          <a href="/ansiart.html">AnsiArt</a>
          <a href="/compare.html">Compare</a>
        </span>
      </div>
      <div class="socials" style="display:flex;gap:.65rem">
        <a href="https://bsky.app/profile/goreandgiggles.bsky.social" target="_blank" title="Bluesky"><img src="/assets/bluesky.svg" alt="Bluesky" width="24"></a>
        <a href="https://x.com/GoreandGiggles" target="_blank" title="X/Twitter"><img src="/assets/x-twitter.svg" alt="X" width="24"></a>
      </div>
    </nav>

    <!-- HEADER AD -->
    <div class="ad-wrap ad-728x90"><ins id="1101674" data-width="728" data-height="90"></ins></div>
    <script>(adsbyjuicy=window.adsbyjuicy||[]).push({adzone:1101674});</script>

    <header class="hero">
      <h1 style="margin:.2rem 0 0">Image → <b>Auto‑Describe</b> → Prompt</h1>
      <p style="opacity:.9">Drop any image. A tiny captioning model runs in your browser to describe it. Tweak the text and convert to Midjourney / Stable Diffusion prompts. No upload.</p>
    </header>

    <main class="panel">
      <div class="grid">
        <section>
          <div class="step">
            <h3>1) Upload / Drop Image <span class="micro" onclick="tip('upload')">?</span></h3>
            <div class="uploader" id="dropzone" onclick="document.getElementById('file').click()" ondragover="event.preventDefault()" ondrop="handleDrop(event)">
              <input id="file" type="file" accept="image/*" style="display:none" onchange="loadImage(event)">
              <div class="row"><button class="btn">Choose Image</button><small style="opacity:.75">PNG · JPG · WebP · HEIC (EXIF varies)</small></div>
              <div id="filename" style="opacity:.8"></div>
            </div>
            <div class="canvas-wrap" style="margin-top:1rem"><canvas id="preview" width="512" height="512"></canvas></div>
          </div>

          <div class="step">
            <h3>2) Auto‑Describe (in‑browser) <span class="micro" onclick="tip('auto')">?</span></h3>
            <div class="row" style="margin-bottom:.6rem">
              <button class="btn primary" id="btnCaption" disabled>Analyze Image</button>
              <small id="modelStatus" style="opacity:.85">Loading caption model… (first run caches it)</small>
            </div>
            <div class="field"><label>Auto description<textarea id="autoText" placeholder="When ready, the model writes here."></textarea></label></div>
            <div class="two">
              <div class="field"><b>EXIF</b><div id="exif" style="font-family:'Fira Mono',monospace;font-size:.95em"></div></div>
              <div class="field"><b>Colors</b><div id="palette" class="row"></div></div>
            </div>
            <div class="field" id="diagnostics" style="margin-top:.8rem;background:#0c131b;border:1px dashed #22303d;border-radius:10px;padding:.6rem .8rem;color:#bfe8ff;font-family:'Fira Mono',monospace;font-size:.9em"></div>
          </div>

          <div class="step">
            <h3>3) Refine & Split <span class="micro" onclick="tip('refine')">?</span></h3>
            <div class="two">
              <div class="field"><label>Subject<input id="f_subject" type="text" placeholder="auto‑filled from caption"></label></div>
              <div class="field"><label>Scene / Setting<input id="f_setting" type="text"></label></div>
              <div class="field"><label>Style / Medium<input id="f_style" type="text"></label></div>
              <div class="field"><label>Lighting / Mood<input id="f_light" type="text"></label></div>
              <div class="field"><label>Composition<input id="f_comp" type="text"></label></div>
              <div class="field"><label>Negatives<input id="f_negative" type="text" placeholder="blur, artifacts, low‑res"></label></div>
            </div>
            <div class="chips" id="quickTags" style="margin-top:.5rem"></div>
          </div>

          <div class="step">
            <h3>4) Choose Template</h3>
            <div class="two">
              <div class="field"><label>Template<select id="tpl"><option value="mj">Midjourney (v7+ style)</option><option value="sdxl">Stable Diffusion XL / 3.5</option><option value="generic">Generic (any model)</option></select></label></div>
              <div class="field"><label>Camera (auto if present)<input id="f_camera" type="text" placeholder="Sony A7R, 50mm f/1.4, ISO 200"></label></div>
            </div>
          </div>

          <div class="step">
            <h3>5) Build Prompt</h3>
            <div class="out" id="out"></div>
            <div class="row" style="margin-top:.8rem"><button class="btn primary" onclick="buildPrompt()">Generate</button><button class="btn good" onclick="copyPrompt()">Copy</button></div>
          </div>

          <!-- MID AD -->
          <div class="ad-wrap ad-300x250" style="margin-top:1.2rem"><ins id="1101622" data-width="300" data-height="250"></ins></div>
          <script>(adsbyjuicy=window.adsbyjuicy||[]).push({adzone:1101622});</script>
        </section>

        <aside class="sticky">
          <div class="step">
            <h3>How it works</h3>
            <p style="margin:.2rem 0 0">We run a lightweight <b>image captioning</b> model in the browser using <b>Transformers.js</b>. Your file never leaves your device. First load fetches model weights from a CDN and caches them.</p>
          </div>
          <div class="step"><b>Tips</b>
            <ul style="margin:.4rem 0 0 1.1rem;opacity:.95">
              <li>Click a palette swatch to add a color cue to <i>Style</i>.</li>
              <li>Split the auto text into short, punchy phrases.</li>
              <li>MJ likes tight nouns + tags; SDXL/3.5 likes explicit details + negatives.</li>
            </ul>
          </div>
          <div class="step"><b>Privacy</b><p style="margin:.3rem 0 0">100% client‑side. Ads are separate and never touch your files.</p></div>
        </aside>
      </div>

      <!-- BOTTOM AD -->
      <div class="ad-wrap ad-728x90"><ins id="1101674" data-width="728" data-height="90"></ins></div>
      <script>(adsbyjuicy=window.adsbyjuicy||[]).push({adzone:1101674});</script>
    </main>

    <aside class="ad-wrap ad-160x600" id="sideAd"><ins id="1101675" data-width="160" data-height="600"></ins></aside>
    <script>try{(adsbyjuicy=window.adsbyjuicy||[]).push({adzone:1101675});}catch(e){}</script>

    <!-- J1NX FLOAT (mobile-safe) -->
    <div class="j1nx-float-true" id="j1nxFloatTrue">
      <img src="/j1nx/j1nx_cutout.png" alt="J1nx" class="j1nx-true-cutout-img" id="j1nxCutoutTrue"/>
      <div class="j1nx-bubble-true-main" id="j1nxBubbleTrueMain">
        <div class="j1nx-bubble-text-true" id="j1nxBubbleTextTrue"><b>J1nx:</b> Drop an image and hit <b>Analyze</b>. Type <b>"tip"</b> for a pro move.</div>
        <div class="row" style="justify-content:center;gap:7px;margin-top:.4rem">
          <input class="j1nx-input-true" id="j1nxInputTrue" placeholder="Say something to J1nx..." maxlength="120" autocomplete="off" style="flex:1;border:1px solid var(--brand);background:#171b22;color:var(--brand);border-radius:8px;padding:.5em .7em;"/>
          <button class="btn" id="j1nxSendTrue">Send</button>
        </div>
        <div class="row" style="justify-content:center;gap:7px;margin-top:.3rem">
          <button class="btn" id="j1nxClearTrue">Clear</button>
          <button class="btn" id="j1nxSaveTrue">Save</button>
        </div>
        <div class="j1nx-easteregg-true" id="j1nxEasterEggTrue" style="font-size:.9em;color:#be9cff;background:#171b22e6;border-radius:8px;padding:6px 12px;margin-top:6px;opacity:.9;">Double‑tap or type <b>unlock</b> for spicy mode…</div>
      </div>
    </div>

    <!-- ANSI Footer (exact art + camo) -->
    <footer>
      <pre class="footer-art" style="text-align:center;font-family:'Fira Mono',monospace;color:#a1ffe3;white-space:pre;user-select:text;">
  ____      ____    U  ___ u  __  __    ____    _____    _____   U  ___ u   ____      ____  U _____ u   
U|  _"\ uU |  _"\ u  \/"_ \/U|' \/ '|uU|  _"\ u|_ " _|  |" ___|   \/"_ \/U |  _"\ uU /"___|u\| ___"|/   
\| |_) |/ \| |_) |/  | | | |\| |\/| |/\| |_) |/  | |   U| |_  u   | | | | \| |_) |/\| |  _ / |  _|"     
 |  __/    |  _ <.-,_| |_| | | |  | |  |  __/   /| |\  \|  _|/.-,_| |_| |  |  _ <   | |_| |  | |___     
 |_|       |_| \_\\_)-\___/  |_|  |_|  |_|     u |_|U   |_|    \_)-\___/   |_| \_\   \____|  |_____|    
 ||>>_     //   \\_    \\   <<,-,,-.   ||>>_   _// \\_  )(\\,-      \\     //   \\_  _)(|_   <<   >>    
(__)__)   (__)  (__)  (__)   (./  \.) (__)__) (__) (__)(__)(_/     (__)   (__)  (__)(__)__) (__) (__)   
      </pre>
      <pre class="footer-camo" id="footerCamo" style="text-align:center;font-size:1.2em;"></pre>
      <div class="footer-bar" style="color:#88fffd;text-align:center;display:flex;justify-content:center;gap:8px;flex-wrap:wrap;">
        Made underground in BC, Canada • #PromptForge •
        <a href="https://bsky.app/profile/goreandgiggles.bsky.social">Bluesky</a> •
        <a href="https://x.com/GoreandGiggles">Twitter/X</a> •
        <a href="/legal.html">Legal</a>
      </div>
    </footer>
  </div>

  <!-- ===== Logic: matrix, captioning, EXIF/palette, builder, J1NX ===== -->
  <script type="module">
    // Matrix rain (light)
    const mc=document.getElementById('matrixRain');const mx=mc.getContext('2d');function fit(){mc.width=innerWidth;mc.height=innerHeight}fit();addEventListener('resize',fit);const col=18,cols=Math.ceil(innerWidth/col),drops=new Array(cols).fill(0);const chars='アァカサタナハマヤャラワガザダバパイィキシチニヒミリヰギジヂビピウゥクスツヌフムユュルグズブプエェケセテネヘメレヱゲゼデベペオォコソトノホモヨョロゴゾドボポ0123456789';setInterval(()=>{mx.fillStyle='rgba(0,0,0,0.08)';mx.fillRect(0,0,mc.width,mc.height);mx.fillStyle='#64f2e3';mx.font='16px monospace';drops.forEach((y,i)=>{const t=chars[Math.floor(Math.random()*chars.length)],px=i*col;mx.fillText(t,px,y);drops[i]= y>mc.height||Math.random()>0.975?0:y+16;});},33);

    // ===== Transformers.js image captioning =====
    import { pipeline, env } from 'https://cdn.jsdelivr.net/npm/@xenova/transformers@2.14.1';
    // Prefer WebGPU when available; fallback to WASM.
    env.allowLocalModels = false; // always fetch from CDN
    const status = document.getElementById('modelStatus');

    // Fix: only touch wasmPaths when the ONNX backend exists (v2 uses env.backends.onnx)
    try {
      if (env.backends?.onnx?.wasm) {
        env.backends.onnx.wasm.wasmPaths = 'https://cdn.jsdelivr.net/npm/@xenova/transformers@2.14.1/dist/wasm/';
      } else if (env.onnx?.wasm) {
        // Backwards compatibility (older builds)
        env.onnx.wasm.wasmPaths = 'https://cdn.jsdelivr.net/npm/@xenova/transformers@2.14.1/dist/wasm/';
      }
    } catch (e) {
      console.warn('Skipping explicit wasmPaths configuration:', e);
    }

    let captioner = null; let modelReady=false;
    (async () => {
      try {
        captioner = await pipeline('image-to-text', 'Xenova/vit-gpt2-image-captioning');
        modelReady = true; status.textContent = 'Model ready.'; document.getElementById('btnCaption').disabled = false;
      } catch (err) {
        status.textContent = 'Failed to load model.'; console.error(err);
      }
    })();

    // ===== Tiny self‑tests (rendered in #diagnostics) =====
    function diag(msg, ok=true){
      const el = document.getElementById('diagnostics');
      if(!el) return; const tag = ok? '✅':'❌'; el.innerHTML += `${tag} ${msg}<br>`;
    }
    // Basic runtime checks
    diag('Transformers env present: ' + Boolean(env));
    diag('ONNX backend present: ' + Boolean(env.backends?.onnx || env.onnx));
    diag('WebGPU supported: ' + ('gpu' in navigator));

    // ===== Upload/preview =====
    const cvs=document.getElementById('preview');const ctx=cvs.getContext('2d'); let imgEl=new Image();
    function draw(img){const max=1000;let w=img.naturalWidth,h=img.naturalHeight;const r=Math.min(1,max/Math.max(w,h));w=Math.round(w*r);h=Math.round(h*r);cvs.width=w;cvs.height=h;ctx.clearRect(0,0,w,h);ctx.drawImage(img,0,0,w,h);} 
    window.loadImage = (e)=>{ const file=e.target.files[0]; if(!file) return; document.getElementById('filename').textContent=file.name; const url=URL.createObjectURL(file); imgEl=new Image(); imgEl.onload=()=>{ draw(imgEl); extractEXIF(file); extractPalette(imgEl); URL.revokeObjectURL(url); }; imgEl.src=url; }
    window.handleDrop = (e)=>{ e.preventDefault(); const f=e.dataTransfer.files&&e.dataTransfer.files[0]; if(!f) return; document.getElementById('file').files=e.dataTransfer.files; loadImage({target:{files:e.dataTransfer.files}}); };

    // ===== Auto‑describe =====
    document.getElementById('btnCaption').onclick = async () => {
      if(!modelReady || !imgEl.src){ status.textContent = 'Load an image first.'; return; }
      status.textContent = 'Thinking…';
      try {
        const out = await captioner(imgEl, { max_new_tokens: 40 });
        const text = Array.isArray(out) ? out[0].generated_text : (out.generated_text || String(out));
        document.getElementById('autoText').value = text;
        // Heuristic split into fields
        document.getElementById('f_subject').value = text.split(',')[0] || text;
        document.getElementById('f_style').value = (text.match(/(photo|illustration|painting|3d|film|cinematic|magazine|polaroid)/i)||[])[0]||'';
        document.getElementById('f_setting').value = (text.match(/(street|city|forest|beach|studio|indoor|outdoor|night|day|sunset|rain)/i)||[])[0]||'';
        document.getElementById('f_light').value = (text.match(/(neon|golden hour|soft light|backlit|rim light|fog|shadow|bokeh)/i)||[])[0]||'';
        diag('Caption generated.');
      } catch(err){ status.textContent = 'Model error. Try a smaller image.'; console.error(err); diag('Captioning failed: ' + err.message, false); }
    };

    // ===== EXIF & palette =====
    window.extractEXIF = async (file)=>{ const box=document.getElementById('exif'); box.innerHTML='<em>Reading…</em>'; try{ const d=await exifr.parse(file,{tiff:true,xmp:true,makernotes:false}); if(!d){ box.textContent='None'; return; } const cam=[d.Make,d.Model].filter(Boolean).join(' '); const lens=d.LensModel||d.Lens||''; const iso=d.ISO?`ISO ${d.ISO}`:''; const f=d.FNumber?`f/${d.FNumber}`:''; const ss=d.ExposureTime?`${d.ExposureTime}s`:''; const fl=d.FocalLength?`${Math.round(d.FocalLength)}mm`:''; const ex=[cam,lens,fl,f,iso,ss].filter(Boolean).join(' · '); box.textContent=ex||'—'; document.getElementById('f_camera').value=ex; } catch(e){ box.textContent='No EXIF / unsupported format.'; } };
    window.extractPalette = (img)=>{ const p=document.getElementById('palette'); p.innerHTML=''; try{ const thief=new ColorThief(); const sw=thief.getPalette(img,6)||[]; sw.forEach(rgb=>{ const [r,g,b]=rgb; const hex='#'+[r,g,b].map(v=>v.toString(16).padStart(2,'0')).join(''); const el=document.createElement('div'); el.style.cssText=`width:26px;height:26px;border-radius:6px;border:1px solid #20313b;background:${hex}`; el.title=hex; el.onclick=()=>{ const f=document.getElementById('f_style'); f.value=(f.value?f.value+', ':'')+`palette ${hex}`; }; p.appendChild(el); }); }catch(e){ p.textContent='(palette unavailable)'; } };

    // ===== Quick tags
    const TAGS=['high detail','ultra sharp','bokeh','shallow DOF','macro','wide angle','film grain','soft light','backlit','rim light','volumetric fog','long exposure','studio lighting','golden hour','no watermark','clean background'];
    const quickTagsEl=document.getElementById('quickTags'); TAGS.forEach(t=>{ const el=document.createElement('span'); el.className='chip'; el.textContent=t; el.onclick=()=>el.classList.toggle('active'); quickTagsEl.appendChild(el); });

    // ===== Prompt builder
    const val=(id)=>document.getElementById(id).value.trim();
    window.buildPrompt = ()=>{ const sel=[...document.querySelectorAll('#quickTags .chip.active')].map(el=>el.textContent); const common=`${val('f_subject')}${val('f_setting')?', '+val('f_setting'):''}${val('f_style')?', '+val('f_style'):''}${val('f_light')?', '+val('f_light'):''}${val('f_comp')?', '+val('f_comp'):''}${sel.length?', '+sel.join(', '):''}`.replace(/\s+,/g,',').replace(/\s+/g,' ').trim(); let out=''; const cam=val('f_camera'); const neg=val('f_negative'); const tpl=val('tpl'); if(tpl==='mj'){ out=`${common}${cam?`, ${cam}`:''}${neg?` --no ${neg}`:''}`; } else if(tpl==='sdxl'){ out=`(${common})${cam?`, ${cam}`:''}${neg?` NEGATIVE: (${neg})`:''}`; } else { out=`${common}${cam?` | ${cam}`:''}${neg?` | avoid: ${neg}`:''}`; } document.getElementById('out').textContent=out; return out; };
    window.copyPrompt = ()=>{ const t=buildPrompt(); navigator.clipboard.writeText(t); const o=document.getElementById('out'); o.style.outline='2px solid var(--good)'; setTimeout(()=>o.style.outline='none',600); };

    // ===== J1NX lite
    (function(){let chat=[];let nsfw=false;const txt=document.getElementById('j1nxBubbleTextTrue');function render(){txt.innerHTML=chat.map(l=>`<div>${l}</div>`).join('')||txt.innerHTML;}function add(m,me=false){chat.push((me?'<b>You:</b> ':'<b>J1nx:</b> ')+m);if(chat.length>8)chat=chat.slice(-8);render();}function brain(input){try{if(window.j1nxBrain){const r=window.j1nxBrain(input,chat.length,nsfw);return(r&&typeof r==='object')?(r.text||r.reply||JSON.stringify(r)):r;}}catch(e){}return 'Try: subject + style + lighting + composition. Type “tip”.';}document.getElementById('j1nxSendTrue').onclick=function(){const v=document.getElementById('j1nxInputTrue').value.trim();if(!v)return;add(v,true);if(/^unlock$/i.test(v)){nsfw=true;add('NSFW mode unlocked.');document.getElementById('j1nxEasterEggTrue').textContent='NSFW mode unlocked.';document.getElementById('j1nxInputTrue').value='';return;}const r=brain(v.toLowerCase().includes('tip')?'give me an image‑prompt tip':v);add(r,false);document.getElementById('j1nxInputTrue').value='';};document.getElementById('j1nxClearTrue').onclick=function(){chat=[];render();};document.getElementById('j1nxSaveTrue').onclick=function(){const text=chat.map(s=>s.replace(/<[^>]+>/g,'')).join('\n');const blob=new Blob([text],{type:'text/plain'});const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download='j1nx_chat.txt';a.click();setTimeout(()=>URL.revokeObjectURL(url),500);};})();
  </script>
  <script src="/assets/j1nx_brain.js"></script>

  <!-- JSON‑LD -->
  <script type="application/ld+json">{"@context":"https://schema.org","@type":"WebSite","url":"https://promptforge.online/","name":"PromptForge","publisher":{"@type":"Organization","name":"PromptForge","logo":{"@type":"ImageObject","url":"https://promptforge.online/assets/logo.png"}},"potentialAction":{"@type":"SearchAction","target":"https://promptforge.online/search?q={q}","query-input":"required name=q"}}</script>
  <script type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Image","item":"https://promptforge.online/picture.html"},{"@type":"ListItem","position":2,"name":"Image→Describe","item":"https://promptforge.online/imagetodescribe.html"}]}</script>
  <script type="application/ld+json">{"@context":"https://schema.org","@type":"FAQPage","mainEntity":[{"@type":"Question","name":"Does this send my image to a server?","acceptedAnswer":{"@type":"Answer","text":"No. The captioning model (Transformers.js) runs in your browser. First load fetches model weights over CDN and then they are cached."}},{"@type":"Question","name":"Why does first run take longer?","acceptedAnswer":{"@type":"Answer","text":"The model files (~tens of MB) download once, then your browser caches them. Later runs are much faster, especially with WebGPU‑capable browsers."}},{"@type":"Question","name":"What models are used?","acceptedAnswer":{"@type":"Answer","text":"A small image‑to‑text model from the Xenova Transformers.js collection (ViT‑GPT2) is used by default for broad compatibility. You can swap to BLIP‑based captioners if you want higher quality on strong GPUs."}}]}</script>
</body>
</html>
